# Scripting Service

Scripting 是一套由开发者在应用开发时，根据具体应用中的数据交互场景，预定义的一套用于访问指定范围内数据集的供其他用户访问者进行数据存储和访问规则。开发者可以通过Scripting Service 接口来实现复杂的社交应用或者交互式游戏应用，在应用内可以进行数据局部范围内分享和交互。

Scripting Service 由 Condition 和 Executalbe 等规则组合使用。

## Executable

Executable 是一组对指定数据集的操作规则。开发者在开发应用时，根据具体应用场景，对指定数据集（例如 Vault 中的文件数据和数据库中条目数据）预定义规则。只有对于满足 Condition 条件中的用户DID和应用 DID，可以执行预定义规则脚本。

开发者定义规则应该明确数据的访问对象范围，力求做到允许访问数据范围的最小集。比如：特定的数据库字段或指定文件的路径，允许用户在脚本里设计自定义参数。

脚本的参数和类型被包装在脚本的 Executable（执行体）里面，作为脚本的组成部分之一。当然一个脚本可以包含多个执行体，它们用名称分开，这样可以在执行脚本的时候获取对应的返回值。

## Condition

Condition 是一组对访问者集合的过滤规则。开发者在开发应用时，根据具体应用场景，除了对限定对指定数据的预定义访问和存储规则，也需要对访问者进限定过滤。只有满足 Condition 条件中的用户 DID和应用 DID，才允许执行预定义规则，操作规则范围的 vault 数据。

当其他用户在访问某个Owner DID的 vault 数据时，会提供对应其对应的用户 DID 和应用 DID。而后端脚本通过Condition规则 验证该DID 和应用DID是否有权限访问限制数据。如果通过Condition规则，则开始执行 Executable 规则执行数据访问和存储，否则，则禁止执行 Exceutable 脚本规则。

## Anonymous

除了支持定义 Condition 规则来限制数据访问者，Hive Node 的scripting 机制还支持匿名访问，包括用户 DID 匿名访问和应用 DID 匿名访问。 用户 DID 匿名访问就是不限制用户的 DID，任何 DID 用户都可以访问指定规则范围内的数据。而应用 DID 匿名访问就是不限制应用的 DID，任何应用 DID 应用上下文中都可以访问指定规则范围的数据。
